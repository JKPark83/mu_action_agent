# PRD-05: 가치 평가 및 적정가 산출 (Valuation Engine)

> **문서 버전**: v1.0
> **작성일**: 2026-02-12
> **상태**: Draft
> **상위 문서**: PRD-00 시스템 개요
> **의존성**: PRD-01, PRD-02, PRD-03, PRD-04 (모든 분석 결과를 종합)

---

## 1. 개요

### 1.1 목적
권리분석, 시장 데이터, 뉴스 분석 결과를 종합하여 **입찰 적정가**, **매도 적정가**, **투자 수익률**을 산출하고, **최종 입찰 추천 여부**를 판단하는 핵심 엔진을 개발한다.

### 1.2 배경
이 모듈은 시스템의 최종 출력을 생성하는 핵심 모듈이다. 앞선 모든 분석 결과를 종합하여 사용자에게 투자 의사결정에 필요한 정보를 제공한다.

---

## 2. 산출 항목

### 2.1 핵심 산출물
| 항목 | 설명 | 단위 |
|------|------|------|
| **입찰 추천 여부** | 추천 / 보류 / 비추천 | 3단계 |
| **입찰 적정가** | 권장 입찰 가격 범위 | 원 (최소~최대) |
| **매도 적정가** | 낙찰 후 예상 매도 가격 범위 | 원 (보수적~낙관적) |
| **예상 수익률** | 투자 대비 예상 수익률 | % |
| **투자 위험도** | 종합 위험도 등급 | 상/중/하 |

---

## 3. 적정가 산출 알고리즘

### 3.1 입찰 적정가 산출

#### 3.1.1 산출 공식 (기본)
```
입찰 적정가 = 추정 시세 - 인수 비용 - 명도 비용 - 수리 비용 - 기대 수익
```

#### 3.1.2 상세 산출 요소
```
[추정 시세]
  = 실거래가 기반 현재 시세 (PRD-03 결과)
  × 시장 동향 보정 계수 (PRD-04 결과)

[인수 비용]
  = 인수되는 권리 총액 (PRD-02 결과)
  + 대항력 있는 임차인 보증금 합계

[부대 비용]
  = 취득세 (약 4.6~13.4%)
  + 법무사 비용 (약 50~100만원)
  + 이사/명도 비용 (예상치)
  + 수리/리모델링 비용 (감정평가서 기반 추정)
  + 중개수수료 (매도 시)

[기대 수익]
  = 투자금 × 목표 수익률 (기본 20%)
  × 투자 기간 보정

[입찰 적정가 범위]
  보수적 = 추정 시세 × 0.65 - 인수비용 - 부대비용
  적정   = 추정 시세 × 0.75 - 인수비용 - 부대비용
  공격적 = 추정 시세 × 0.85 - 인수비용 - 부대비용
```

### 3.2 매도 적정가 산출

#### 3.2.1 산출 요소
```
[매도 적정가 범위]
  보수적 시나리오 = 현재 시세 × 0.95 (시장 하락 가정)
  기본 시나리오   = 현재 시세 × 1.00 (현재 시세 유지)
  낙관적 시나리오 = 현재 시세 × 1.05~1.10 (시장 상승 가정)

시장 동향 보정:
  - 상승 추세: 보정 계수 +3~5%
  - 하락 추세: 보정 계수 -3~5%
  - 호재 존재: 추가 보정 +2~5%
  - 악재 존재: 추가 보정 -2~5%
```

### 3.3 수익률 산출

#### 3.3.1 투자 수익률 계산
```
[총 투자 비용]
  = 낙찰가 + 인수비용 + 부대비용 + 수리비용

[예상 매도 수익]
  = 매도 예상가 - 양도소득세 - 중개수수료

[투자 수익률]
  = (예상 매도 수익 - 총 투자 비용) / 총 투자 비용 × 100

[연환산 수익률]
  = 투자 수익률 / 예상 보유 기간(년) × 100
```

#### 3.3.2 임대 수익률 (보유 시)
```
[월 임대 수익]
  = 예상 월세 (주변 전월세 시세 기반)

[연 임대 수익률]
  = (연 임대 수익 - 연 관리비/세금) / 총 투자 비용 × 100
```

---

## 4. 기능 요구사항

### 4.1 가치 평가
- **FR-05-001**: 모든 분석 결과(권리분석, 시장데이터, 뉴스분석)를 종합하여 가치를 평가해야 한다
- **FR-05-002**: 보수적/적정/공격적 3가지 시나리오별 결과를 제공해야 한다
- **FR-05-003**: 각 산출 항목의 계산 근거를 투명하게 제공해야 한다
- **FR-05-004**: 시장 동향에 따른 보정 계수를 자동 적용해야 한다

### 4.2 입찰 추천 판단
- **FR-05-005**: 종합 분석 결과를 바탕으로 입찰 추천/보류/비추천을 판단해야 한다
- **FR-05-006**: 추천 판단의 근거를 명확히 설명해야 한다
- **FR-05-007**: 다음 기준을 적용하여 추천 등급을 결정해야 한다:

| 추천 등급 | 조건 |
|-----------|------|
| **추천** | 위험도 '하' + 예상 수익률 15% 이상 |
| **보류** | 위험도 '중' 또는 예상 수익률 5~15% |
| **비추천** | 위험도 '상' 또는 예상 수익률 5% 미만 또는 인수 위험 존재 |

### 4.3 비용 상세 분석
- **FR-05-008**: 취득세를 부동산 유형/가격대에 따라 정확히 산출해야 한다
- **FR-05-009**: 명도 비용을 임차인 수와 대항력 유무에 따라 추정해야 한다
- **FR-05-010**: 수리/리모델링 비용을 감정평가서와 현황보고서 기반으로 추정해야 한다

### 4.4 결과 리포트 생성
- **FR-05-011**: 최종 분석 결과를 종합 리포트 형태로 생성해야 한다
- **FR-05-012**: 비전문가도 이해할 수 있는 쉬운 용어와 시각적 표현을 사용해야 한다
- **FR-05-013**: 면책 조항(AI 분석 결과는 참고용이며 투자 판단의 책임은 사용자에게 있음)을 포함해야 한다

---

## 5. 데이터 모델

### 5.1 최종 분석 결과
```python
@dataclass
class ValuationResult:
    """최종 가치 평가 결과"""
    case_number: str                    # 사건번호
    property_address: str               # 소재지
    analysis_date: date                 # 분석일

    # 입찰 추천
    recommendation: Recommendation      # 추천 여부
    recommendation_reason: str          # 추천 근거

    # 입찰 적정가
    bid_price: BidPriceRange            # 입찰 적정가 범위

    # 매도 적정가
    sale_price: SalePriceRange          # 매도 적정가 범위

    # 수익률 분석
    profitability: ProfitabilityAnalysis

    # 비용 분석
    cost_breakdown: CostBreakdown       # 비용 상세

    # 위험도 종합
    overall_risk: RiskAssessment        # 종합 위험 평가

    # 분석 근거 요약
    analysis_summary: AnalysisSummary   # 분석 요약

    # 메타데이터
    confidence_score: float             # 종합 신뢰도
    disclaimer: str                     # 면책 조항

class Recommendation(str, Enum):
    RECOMMEND = "추천"
    HOLD = "보류"
    NOT_RECOMMEND = "비추천"

@dataclass
class BidPriceRange:
    """입찰 적정가 범위"""
    conservative: int                   # 보수적 입찰가
    moderate: int                       # 적정 입찰가
    aggressive: int                     # 공격적 입찰가
    minimum_bid: int                    # 최저매각가격
    calculation_basis: str              # 산출 근거

@dataclass
class SalePriceRange:
    """매도 적정가 범위"""
    pessimistic: int                    # 비관적 시나리오
    base: int                           # 기본 시나리오
    optimistic: int                     # 낙관적 시나리오
    holding_period_months: int          # 예상 보유 기간 (월)

@dataclass
class ProfitabilityAnalysis:
    """수익률 분석"""
    total_investment: int               # 총 투자 비용
    expected_profit_min: int            # 최소 예상 수익
    expected_profit_max: int            # 최대 예상 수익
    roi_conservative: float             # 보수적 수익률 (%)
    roi_moderate: float                 # 적정 수익률 (%)
    roi_optimistic: float               # 낙관적 수익률 (%)
    annual_roi: float                   # 연환산 수익률 (%)
    rental_yield: float | None          # 임대 수익률 (%)

@dataclass
class CostBreakdown:
    """비용 상세 분석"""
    bid_price: int                      # 낙찰가 (입력값)
    acquisition_tax: int                # 취득세
    registration_fee: int               # 등록면허세
    legal_fee: int                      # 법무사 비용
    assumed_rights_cost: int            # 인수 권리 비용
    eviction_cost: int                  # 명도 비용
    repair_cost: int                    # 수리 비용
    brokerage_fee: int                  # 중개수수료 (매도 시)
    capital_gains_tax: int              # 양도소득세 (예상)
    total_cost: int                     # 총 비용

@dataclass
class RiskAssessment:
    """종합 위험 평가"""
    overall_level: str                  # "상" | "중" | "하"
    rights_risk: str                    # 권리 위험도
    market_risk: str                    # 시장 위험도
    eviction_risk: str                  # 명도 위험도
    risk_factors: list[str]             # 위험 요소 목록
    mitigation_suggestions: list[str]   # 위험 완화 방안

@dataclass
class AnalysisSummary:
    """분석 요약"""
    property_overview: str              # 물건 개요
    rights_summary: str                 # 권리분석 요약
    market_summary: str                 # 시세 분석 요약
    news_summary: str                   # 뉴스/동향 요약
    overall_opinion: str                # 종합 의견
```

---

## 6. AI 에이전트 설계

### 6.1 Claude 활용 포인트
- **종합 판단**: 다양한 분석 데이터를 종합한 투자 의견 생성
- **비용 추정**: 정형화되지 않은 비용(명도비, 수리비)의 합리적 추정
- **리포트 생성**: 사용자 친화적인 분석 리포트 자연어 생성
- **시나리오 분석**: 다양한 시나리오별 결과 생성 및 설명

### 6.2 분석 흐름
```
1. 모든 에이전트 분석 결과 수집
   ├─ 권리분석 결과 (PRD-02)
   ├─ 시장 데이터 결과 (PRD-03)
   └─ 뉴스 분석 결과 (PRD-04)
       │
2. 비용 산출
   ├─ 인수 비용 계산
   ├─ 부대 비용 계산
   └─ 수리/명도 비용 추정
       │
3. 적정가 산출
   ├─ 입찰 적정가 (3단계 시나리오)
   └─ 매도 적정가 (3단계 시나리오)
       │
4. 수익률 분석
   ├─ 매도 수익률
   └─ 임대 수익률
       │
5. 위험도 종합 평가
       │
6. 입찰 추천 판단
       │
7. 최종 리포트 생성
```

---

## 7. 취득세 산출 기준표

| 부동산 유형 | 주택 수 | 조정대상지역 | 세율 |
|-------------|---------|-------------|------|
| 주택 6억 이하 | 1주택 | X | 1% |
| 주택 6~9억 | 1주택 | X | 1~3% |
| 주택 9억 초과 | 1주택 | X | 3% |
| 주택 | 2주택 | X | 1~3% |
| 주택 | 2주택 | O | 8% |
| 주택 | 3주택 이상 | X | 8% |
| 주택 | 3주택 이상 | O | 12% |
| 상가/오피스텔 | - | - | 4.6% |
| 토지 | - | - | 4% |

> ※ 지방교육세, 농어촌특별세 등 부가세 포함 시 실효세율은 상이할 수 있음
> ※ 세율은 정책 변경에 따라 달라질 수 있으므로 최신 기준 확인 필요

---

## 8. 비기능 요구사항

- **정확도**: 비용 산출 오차 ±5% 이내 (취득세 등 정형 비용 기준)
- **응답 시간**: 가치 평가 완료 30초 이내
- **투명성**: 모든 산출 결과의 계산 근거를 사용자가 확인 가능
- **면책**: AI 분석 결과는 참고용이라는 면책 조항 필수 포함

---

## 9. 추후 상세화 필요 사항
- [ ] 취득세 산출 로직 최신 세법 반영 및 검증
- [ ] 양도소득세 추정 로직 설계
- [ ] 명도 비용 추정 알고리즘 상세화
- [ ] 수리/리모델링 비용 추정 기준 확립
- [ ] 시장 동향 보정 계수 산출 알고리즘 상세화
- [ ] 부동산 유형별(아파트, 빌라, 토지, 상가) 차별화된 산출 로직
- [ ] 다주택자 세금 계산 로직
- [ ] Claude 프롬프트 템플릿 상세 작성
