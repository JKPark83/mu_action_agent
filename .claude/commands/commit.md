---
description: 현재 변경사항을 분석하여 구조화된 커밋 메시지를 생성하고 커밋합니다
---

## 사용자 입력

```text
$ARGUMENTS
```

사용자 입력이 비어있지 않으면 커밋 메시지 제목이나 추가 컨텍스트로 활용합니다.

## 실행 절차

### 1단계: 변경사항 분석

다음 명령을 **병렬로** 실행하여 현재 상태를 파악합니다:

- `git status` — 변경된 파일 목록 확인 (절대 `-uall` 플래그 사용 금지)
- `git diff --staged` — 스테이징된 변경사항 확인
- `git diff` — 스테이징되지 않은 변경사항 확인
- `git log --oneline -5` — 최근 커밋 스타일 참고

### 2단계: 변경사항이 없는 경우

스테이징된 변경사항과 스테이징되지 않은 변경사항이 모두 없으면:
- "커밋할 변경사항이 없습니다."라고 안내하고 **종료**합니다.

### 3단계: 변경 내용 분석 및 분류

변경된 파일들의 diff를 읽고 다음을 파악합니다:

- **변경 유형**: feat(신규 기능), fix(버그 수정), refactor(리팩토링), docs(문서), style(스타일), test(테스트), chore(기타), perf(성능 개선) 중 해당하는 것
- **주요 변경 내역**: 핵심적인 변경사항 요약 (bullet point)
- **상세 변경 내역**: 파일별 구체적인 변경 내용 (bullet point)
- **영향 범위**: 이 변경이 영향을 미치는 모듈, 기능, 페이지 등

### 4단계: 커밋 메시지 초안 작성

아래 형식으로 커밋 메시지를 생성합니다:

```
<type>: <변경내용 제목 (한국어, 50자 이내)>

## 주요변경 내역
- <핵심 변경사항 1>
- <핵심 변경사항 2>
- ...

## 상세변경 내역
- <파일명 또는 모듈>: <구체적 변경 내용>
- <파일명 또는 모듈>: <구체적 변경 내용>
- ...

## 영향범위
- <영향받는 모듈/기능/페이지 1>
- <영향받는 모듈/기능/페이지 2>
- ...
```

**제목 작성 규칙**:
- `<type>`은 영어 소문자 (feat, fix, refactor, docs, style, test, chore, perf)
- 제목은 한국어로 간결하게 작성
- 사용자가 `$ARGUMENTS`로 제목을 제공한 경우 해당 내용을 반영

**본문 작성 규칙**:
- 모든 본문은 한국어로 작성
- 주요변경 내역은 3~5개 이내로 핵심만 기술
- 상세변경 내역은 파일/모듈 단위로 구체적으로 기술
- 영향범위는 이 변경으로 인해 동작이 달라지는 부분을 기술
- 변경사항이 단순하여 특정 섹션이 불필요한 경우 해당 섹션은 생략 가능

### 5단계: 사용자 확인

생성한 커밋 메시지 초안을 사용자에게 보여주고 확인을 요청합니다:

- 커밋 메시지 전문을 표시
- 스테이징할 파일 목록을 표시
- "이 내용으로 커밋하시겠습니까?"라고 질문

사용자가 수정을 요청하면 반영 후 다시 확인합니다.

### 6단계: 커밋 실행

사용자가 승인하면:

1. 필요한 파일을 스테이징합니다 (개별 파일명으로 `git add`, 절대 `git add -A` 또는 `git add .` 사용 금지)
   - `.env`, `credentials`, 시크릿 파일은 **절대 스테이징하지 않음** — 발견 시 사용자에게 경고
2. HEREDOC 형식으로 커밋합니다:

```bash
git commit -m "$(cat <<'EOF'
<커밋 메시지 전문>

Co-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>
EOF
)"
```

3. 커밋 후 `git status`로 결과를 확인합니다.

### 7단계: 결과 보고

- 커밋 해시와 메시지 제목을 표시합니다.
- pre-commit hook 실패 시: 문제를 수정하고 **새로운 커밋을 생성**합니다 (절대 `--amend` 사용 금지).

## 안전 규칙

- git config를 **절대** 변경하지 않습니다
- `--force`, `--no-verify`, `--no-gpg-sign` 등의 플래그를 **절대** 사용하지 않습니다
- `git push`는 **절대** 자동으로 실행하지 않습니다 — 사용자가 명시적으로 요청한 경우에만
- 이미 존재하는 커밋을 `--amend`하지 않습니다
- 시크릿이 포함된 파일(.env, credentials.json 등)은 커밋하지 않습니다
